(this["webpackJsonpreact-front"]=this["webpackJsonpreact-front"]||[]).push([[0],{43:function(t,e,n){},44:function(t,e,n){},56:function(t,e,n){},58:function(t,e,n){},59:function(t,e,n){},60:function(t,e,n){},81:function(t,e,n){},84:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n(1),r=n.n(a),i=n(36),s=n.n(i),o=n(14),u=(n(43),n(3)),j=(n.p,n(44),n(11)),d=n(6);n(45);function l(){return fetch("".concat("/main/api","/get-pics"),{method:"GET"}).then((function(t){return t.json()})).then((function(t){return t.picsData}))}n(56),n(57),n(20);function b(){var t=Object(a.useState)([]),e=Object(d.a)(t,2),n=e[0],r=e[1],i=Object(a.useState)(!1),s=Object(d.a)(i,2),o=s[0],u=s[1];Object(a.useEffect)((function(){l().then((function(t){return console.log(t),t})).then((function(t){return r(t)}))}),[]),Object(a.useEffect)((function(){fetch("".concat("/main/api","/get-analysis"),{method:"GET"}).then((function(t){return t.json()})).then((function(t){return console.log(t)}));var t=setInterval((function(){u(!o)}),3e3);return function(){clearInterval(t)}}),[o]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"wrapper",children:Object(c.jsx)("div",{className:"scrolls",onScroll:function(t){var e,n=t.target.childNodes,c=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),a=Object(j.a)(n);try{for(a.s();!(e=a.n()).done;){var r=e.value,i=r.getBoundingClientRect().left,s=r.getBoundingClientRect().width;i>0&&i+s<c+50?r.className="scroll-pic active":i<-100|i+s>c+200&&(r.className="scroll-pic inactive")}}catch(o){a.e(o)}finally{a.f()}},children:n[0]?Object(c.jsx)(c.Fragment,{children:n.map((function(t){return Object(c.jsx)("img",{src:t[1],id:t[0],className:"scroll-pic inactive",alt:"pic"})}))}):Object(c.jsx)("h3",{children:"Loading..."})})})})}n(58);function f(){return Object(c.jsx)("h3",{id:"socialsTag",children:"socials component"})}n(59);function O(){return Object(c.jsx)("h3",{id:"introTag",children:"intro component"})}n(60);function h(){return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("h3",{id:"aboutTag",children:"about component"})})}var p=n(17),x=n.n(p),g=n(2),m=n(25),v=n(21),y=n(22),C=n.n(y),F=(n(79),"/main/api");n(81);function S(){var t=Object(a.useState)([]),e=Object(d.a)(t,2),n=e[0],r=e[1],i=Object(a.useState)([]),s=Object(d.a)(i,2),o=s[0],u=s[1],b=Object(a.useState)([]),f=Object(d.a)(b,2),O=f[0],h=f[1],p=Object(a.useState)(),y=Object(d.a)(p,2),S=y[0],E=y[1],k=Object(a.useState)({descriptions:{},tagslists:{}}),w=Object(d.a)(k,2),N=w[0],T=w[1],I=Object(a.useState)([]),D=Object(d.a)(I,2),U=D[0],P=D[1];Object(a.useEffect)((function(){l().then((function(t){return P(t)}))}),[]),Object(a.useEffect)(Object(v.a)(x.a.mark((function t(){var e,c,a,r,i,s,o,d,l,b,f;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Object(m.a)(n),c=e.map((function(t){return t.name})),a=Object(g.a)({},N),(r=Object.keys(a.descriptions)).length>0){i=Object(j.a)(r);try{for(i.s();!(s=i.n()).done;)o=s.value,c.indexOf(o)<0&&(delete a.descriptions[o],delete a.tagslists[o])}catch(O){i.e(O)}finally{i.f()}}for(T(a),u(c),d=new FormData,l=0;l<n.length;l++)d.append("file",n[l]);return E(d),t.next=12,d.getAll("file");case 12:b=t.sent,f=b.map((function(t){return URL.createObjectURL(t)})),h(f);case 15:case"end":return t.stop()}}),t)}))),[n]),Object(a.useEffect)((function(){var t,e=Object(g.a)({},N).tagslists,n=Object(j.a)(o);try{for(n.s();!(t=n.n()).done;){var c=t.value;e[c]||(e[c]=[["",""]])}}catch(a){n.e(a)}finally{n.f()}}));var B=function(){var t=Object(v.a)(x.a.mark((function t(e){var n,c,a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(g.a)({},N),c=JSON.stringify(n),a=new Blob([c],{type:"application/json"}),S.append("dbInfo",a),e=S,C.a.post("".concat(F,"/add-pics/"),e).then((function(t){return console.log(t.data)}));case 5:case"end":return t.stop()}var e}),t)})));return function(e){return t.apply(this,arguments)}}(),G=function(t){var e=t.target.dataset.idx,c=Object(m.a)(n);c.splice(e,1);var a,i=new DataTransfer,s=Object(j.a)(c);try{for(s.s();!(a=s.n()).done;){var o=a.value;i.items.add(o)}}catch(u){s.e(u)}finally{s.f()}r(i.files)},L=function(t){var e=Object(g.a)({},N).descriptions;e[o[t.target.dataset.idx]]=t.target.value,T(Object(g.a)(Object(g.a)({},N),{},{descriptions:e}))},R=function(t){(function(t){return C.a.post("".concat(F,"/remove-pic/"),{picName:t}).then((function(t){return t.data}))})(t.target.id).then((function(t){return console.log(t)}))},A=function(t){var e=Object(g.a)({},N).tagslists,n=t.target.dataset.idxs.split(",").map((function(t){return parseInt(t)})),c=o[n[0]],a=n[1];e[c][a][0]=t.target.value,T(Object(g.a)(Object(g.a)({},N),{},{tagslists:e}))},J=function(t){var e=Object(g.a)({},N).tagslists,n=t.target.dataset.idxs.split(",").map((function(t){return parseInt(t)})),c=o[n[0]],a=n[1];e[c][a][1]=t.target.value,T(Object(g.a)(Object(g.a)({},N),{},{tagslists:e}))},H=function(t){var e=Object(g.a)({},N).tagslists,n=t.target.dataset.idxs.split(",").map((function(t){return parseInt(t)})),c=o[n[0]],a=n[1];e[c].splice(a,1),T(Object(g.a)(Object(g.a)({},N),{},{tagslists:e}))},M=function(t){var e=Object(g.a)({},N).tagslists;e[o[t.target.dataset.idx]].push(["",""]),T(Object(g.a)(Object(g.a)({},N),{},{tagslists:e}))};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h3",{children:"hi"}),Object(c.jsx)("input",{id:"picsInp",type:"file",name:"picsInput",files:n,onChange:function(t){var e,n=new DataTransfer,c=Object(j.a)(t.target.files);try{for(c.s();!(e=c.n()).done;){var a=e.value;n.items.add(a)}}catch(i){c.e(i)}finally{c.f()}r(n.files)},multiple:!0}),Object(c.jsx)("button",{onClick:B,type:"submit",children:"ADD"}),O.map((function(t,e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{"data-idx":e,onClick:G,children:"Remove"}),Object(c.jsx)("img",{src:t,alt:""}),Object(c.jsx)("label",{children:"Description"}),Object(c.jsx)("input",{"data-idx":e,type:"text",name:"description",value:N.descriptions[o[e]],onChange:L}),Object(c.jsx)("label",{children:"Tags"}),N.tagslists[o[e]].map((function(t,n){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("input",{type:"text","data-idxs":[e,n],value:N.tagslists[o[e]][n][0],onChange:A}),Object(c.jsx)("input",{type:"number","data-idxs":[e,n],value:N.tagslists[o[e]][n][1],onChange:J}),Object(c.jsx)("button",{"data-idxs":[e,n],onClick:H,children:"-"})]})})),Object(c.jsx)("button",{"data-idx":e,onClick:M,children:"+"})]})})),U.map((function(t){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:t[1],id:t[0],alt:"old-pic"}),Object(c.jsx)("button",{id:t[0],className:"remove-pic-btn",onClick:R,children:"X"})]})}))]})}var E="/main/api";function k(){var t=Object(a.useState)([]),e=Object(d.a)(t,2),n=e[0],r=e[1],i=Object(a.useState)([]),s=Object(d.a)(i,2),o=s[0],u=s[1],l=Object(a.useState)({}),b=Object(d.a)(l,2),f=b[0],O=b[1],h=Object(a.useState)({}),p=Object(d.a)(h,2),x=p[0],m=p[1];Object(a.useEffect)((function(){fetch("".concat(E,"/get-all-users"),{method:"GET"}).then((function(t){return t.json()})).then((function(t){return t.allUsers})).then((function(t){r(t);var e={},n={};t.map((function(t){e["user*".concat(t)]=[["",""]],n["user*".concat(t)]=""})),O(e),m(n)}))}),[]),Object(a.useEffect)((function(){fetch("".concat(E,"/get-user-info"),{method:"GET"}).then((function(t){return t.json()})).then((function(t){return t.allUsers.map((function(t){return t[1]?[t[0],JSON.parse(t[1])]:t}))})).then((function(t){return u(t)}))}),[]);var v=function(t){var e=Object(g.a)({},f),n=t.target.dataset.userid,c=t.target.dataset.tagidx;e["user*".concat(n)][c][0]=t.target.value,O(e)},y=function(t){var e=Object(g.a)({},f),n=t.target.dataset.userid,c=t.target.dataset.tagidx;e["user*".concat(n)][c][1]=t.target.value,O(e)},C=function(t){var e=Object(g.a)({},f),n=t.target.dataset.userid,c=t.target.dataset.tagidx;e["user*".concat(n)].splice(c,1),O(e)},F=function(t){var e=Object(g.a)({},f),n=t.target.dataset.userid;e["user*".concat(n)].push(["",""]),O(e)},S=function(t){var e=Object(g.a)({},x),n=t.target.dataset.userid,c=f["user*".concat(n)];(function(t,e){var n,c="",a=Object(j.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;c+="dfg67dfg",r.forEach((function(t,e){c+=t,0===e&&(c+="rt45rt")}))}}catch(i){a.e(i)}finally{a.f()}return fetch("".concat(E,"/get-user-interest-prediction/").concat(t,"/").concat(c),{method:"GET"}).then((function(t){return t.json()})).then((function(t){return t.predictedInterest}))})(n,c).then((function(t){e["user*".concat(n)]=t,m(e)}))};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h3",{children:"All Users"}),n.map((function(t){return Object(c.jsx)("h3",{children:t})})),Object(c.jsx)("h3",{children:"All Users Info"}),o.map((function(t){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("h3",{children:["User ID: ",t[0]]}),t[1]?Object(c.jsxs)(c.Fragment,{children:[Object.keys(t[1]).map((function(e){return Object(c.jsxs)("h3",{children:[e,": ",t[1][e]]})})),Object(c.jsx)("label",{children:"Predict Pic Tags"}),f["user*".concat(t[0])].map((function(e,n){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("input",{type:"text","data-userid":t[0],"data-tagidx":n,value:f["user*".concat(t[0])][n][0],onChange:v}),Object(c.jsx)("input",{type:"number","data-userid":t[0],"data-tagidx":n,value:f["user*".concat(t[0])][n][1],onChange:y}),Object(c.jsx)("button",{"data-userid":t[0],"data-tagidx":n,onClick:C,children:"-"})]})})),Object(c.jsx)("button",{"data-userid":t[0],onClick:F,children:"+"}),Object(c.jsx)("button",{"data-userid":t[0],onClick:S,children:"Submit"}),Object(c.jsx)("h3",{children:"prediction"}),Object(c.jsx)("h3",{children:x["user*".concat(t[0])]})]}):Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("h3",{children:"No interest data yet"})})]})}))]})}var w=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(o.b,{className:"nav-items",exact:!0,to:"/main",children:"Home"}),Object(c.jsx)(o.b,{className:"nav-items",exact:!0,to:"/main/edit-pics",children:"Edit Pics"}),Object(c.jsx)(o.b,{className:"nav-items",exact:!0,to:"/main/predictions",children:"Predictions"}),Object(c.jsx)(u.a,{exact:!0,path:"/main",render:function(){return Object(c.jsxs)("div",{id:"appDiv",children:[Object(c.jsx)("h3",{children:"Hi"}),Object(c.jsx)(O,{}),Object(c.jsx)(b,{}),Object(c.jsx)(f,{}),Object(c.jsx)(h,{})]})}}),Object(c.jsx)(u.a,{exact:!0,path:"/main/edit-pics",render:function(){return Object(c.jsx)(S,{})}}),Object(c.jsx)(u.a,{exact:!0,path:"/main/predictions",render:function(){return Object(c.jsx)(k,{})}})]})},N=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,85)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),r(t),i(t)}))};s.a.render(Object(c.jsx)(o.a,{children:Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(w,{})})}),document.getElementById("root")),N()}},[[84,1,2]]]);
//# sourceMappingURL=main.1acb6adf.chunk.js.map